<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced To-Do App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
   <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>Productivity Tracker</h1>
            <p>Organize your day with ease</p>
        </header>

        <div class="input-container">
            <input 
                type="text" 
                id="newTaskInput" 
                placeholder="What needs to be done?"
            >
            <button 
                id="addTaskBtn"
            >
                Add Task
            </button>
        </div>

        <div class="task-list">
            <h2>Pending Tasks <span id="pendingCount">0</span></h2>
            <div id="pendingTasks"></div>
        </div>

        <div class="task-list">
            <h2>Completed Tasks <span id="completedCount">0</span></h2>
            <div id="completedTasks"></div>
        </div>

        <div class="summary">
            <div class="summary-item">
                <h3 id="statsTotal">0</h3>
                <p>Total Tasks</p>
            </div>
            <div class="summary-item">
                <h3 id="statsPending">0</h3>
                <p>Pending</p>
            </div>
            <div class="summary-item">
                <h3 id="statsCompleted">0</h3>
                <p>Completed</p>
            </div>
        </div>

        <div class="footer">
            <p>Tasks are saved in your browser's local storage</p>
        </div>
    </div>

    <script>
        // Task management system
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

        // DOM elements
        const newTaskInput = document.getElementById('newTaskInput');
        const addTaskBtn = document.getElementById('addTaskBtn');
        const pendingTasksList = document.getElementById('pendingTasks');
        const completedTasksList = document.getElementById('completedTasks');
        const pendingCount = document.getElementById('pendingCount');
        const completedCount = document.getElementById('completedCount');
        const statsTotal = document.getElementById('statsTotal');
        const statsPending = document.getElementById('statsPending');
        const statsCompleted = document.getElementById('statsCompleted');

        // Initialize the app
        function init() {
            renderTasks();
            updateStats();
            
            addTaskBtn.addEventListener('click', addTask);
            newTaskInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') addTask();
            });
        }

        // Add a new task
        function addTask() {
            const taskText = newTaskInput.value.trim();
            if (taskText) {
                const newTask = {
                    id: Date.now(),
                    text: taskText,
                    completed: false,
                    createdAt: new Date().toISOString(),
                    completedAt: null
                };
                
                tasks.push(newTask);
                saveTasks();
                renderTasks();
                updateStats();
                newTaskInput.value = '';
                newTaskInput.focus();
            }
        }

        // Toggle task completion status
        function toggleTaskCompletion(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (task) {
                task.completed = !task.completed;
                task.completedAt = task.completed ? new Date().toISOString() : null;
                saveTasks();
                renderTasks();
                updateStats();
            }
        }

        // Delete a task
        function deleteTask(taskId) {
            tasks = tasks.filter(t => t.id !== taskId);
            saveTasks();
            renderTasks();
            updateStats();
        }

        // Edit a task
        function editTask(taskId, newText) {
            const task = tasks.find(t => t.id === taskId);
            if (task && newText.trim()) {
                task.text = newText.trim();
                saveTasks();
                renderTasks();
            }
        }

        // Save tasks to localStorage
        function saveTasks() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        // Render tasks to the DOM
        function renderTasks() {
            pendingTasksList.innerHTML = '';
            completedTasksList.innerHTML = '';
            
            let pending = 0;
            let completed = 0;
            
            tasks.forEach(task => {
                const taskElement = createTaskElement(task);
                if (task.completed) {
                    completedTasksList.appendChild(taskElement);
                    completed++;
                } else {
                    pendingTasksList.appendChild(taskElement);
                    pending++;
                }
            });
            
            pendingCount.textContent = pending;
            completedCount.textContent = completed;
        }

        // Create task element
        function createTaskElement(task) {
            const taskElement = document.createElement('div');
            taskElement.className = `task-item ${task.completed ? 'completed' : ''}`;
            taskElement.dataset.id = task.id;
            
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.checked = task.completed;
            checkbox.addEventListener('change', () => toggleTaskCompletion(task.id));
            
            const taskContent = document.createElement('div');
            taskContent.className = 'task-content';
            
            const taskText = document.createElement('span');
            taskText.textContent = task.text;
            
            const taskMeta = document.createElement('div');
            taskMeta.className = 'task-meta';
            
            const createdAt = new Date(task.createdAt);
            let metaText = `Added: ${createdAt.toLocaleString()}`;
            
            if (task.completed && task.completedAt) {
                const completedAt = new Date(task.completedAt);
                metaText += ` â€¢ Completed: ${completedAt.toLocaleString()}`;
            }
            
            taskMeta.textContent = metaText;
            
            const taskActions = document.createElement('div');
            taskActions.className = 'task-actions';
            
            const editBtn = document.createElement('button');
            editBtn.innerHTML = '<i class="fas fa-edit"></i>';
            editBtn.title = 'Edit';
            editBtn.addEventListener('click', () => {
                const newText = prompt('Edit task:', task.text);
                if (newText !== null) editTask(task.id, newText);
            });
            
            const deleteBtn = document.createElement('button');
            deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
            deleteBtn.title = 'Delete';
            deleteBtn.addEventListener('click', () => {
                if (confirm('Are you sure you want to delete this task?')) {
                    deleteTask(task.id);
                }
            });
            
            // Enable double-click to edit
            taskText.addEventListener('dblclick', () => {
                const newText = prompt('Edit task:', task.text);
                if (newText !== null) editTask(task.id, newText);
            });
            
            taskActions.appendChild(editBtn);
            taskActions.appendChild(deleteBtn);
            
            taskContent.appendChild(taskText);
            taskContent.appendChild(taskMeta);
            
            taskElement.appendChild(checkbox);
            taskElement.appendChild(taskContent);
            taskElement.appendChild(taskActions);
            
            return taskElement;
        }

        // Update statistics
        function updateStats() {
            const total = tasks.length;
            const pending = tasks.filter(t => !t.completed).length;
            const completed = tasks.filter(t => t.completed).length;
            
            statsTotal.textContent = total;
            statsPending.textContent = pending;
            statsCompleted.textContent = completed;
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
